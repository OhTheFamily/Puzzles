<app-header />

<main>
  <section class="pt-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

        <!-- Carte 1: Puzzles terminés -->
        <div class="relative rounded-2xl p-8 h-50 overflow-hidden" style="box-shadow: 0 0 20px 2px rgba(0,0,0,0.08);">
          <div class="z-10 relative">
            <h3 class="text-sm">Puzzles terminés</h3>
            <p class="text-6xl text-orange-600 font-bold">42</p>
          </div>

          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            class="absolute -bottom-20 -right-16 w-60 h-60 text-orange-600 opacity-50 z-0 rotate-45"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z" />
          </svg>
        </div>


        <!-- Carte 2: Pièces assemblées -->
        <div class="relative rounded-2xl p-8 h-50 shadow-lg overflow-hidden"
          style="box-shadow: 0 0 20px 2px rgba(0,0,0,0.08);">
          <div class="z-10 relative">
            <h3 class="text-sm">Pièces assemblées</h3>
            <p class="text-6xl text-orange-600 font-bold">5 400</p>
          </div>

          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            class="absolute -bottom-20 -right-16 w-60 h-60 text-orange-600 opacity-50 z-0 rotate-45"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z" />
          </svg>
        </div>

        <!-- Carte 3: Temps passé -->
        <div class="relative rounded-2xl p-8 h-50 shadow-lg overflow-hidden"
          style="box-shadow: 0 0 20px 2px rgba(0,0,0,0.08);">
          <div class="z-10 relative">
            <h3 class="text-sm">Temps passé</h3>
            <p class="text-6xl text-orange-600 font-bold">38h 27m</p>
          </div>

          <svg xmlns="http://www.w3.org/2000/svg"
            class="absolute -bottom-16 -right-14 w-50 h-50 text-orange-600 opacity-50 z-0 rotate-45" height="24px"
            viewBox="0 -960 960 960" width="24px" fill="currentColor">
            <path
              d="M510-492.15V-650q0-12.75-8.63-21.38-8.63-8.62-21.38-8.62-12.76 0-21.37 8.62Q450-662.75 450-650v167.08q0 7.06 2.62 13.68 2.61 6.62 8.23 12.24l137 137q8.3 8.31 20.88 8.5 12.58.19 21.27-8.5t8.69-21.08q0-12.38-8.69-21.07l-130-130ZM480.07-100q-78.84 0-148.21-29.92t-120.68-81.21q-51.31-51.29-81.25-120.63Q100-401.1 100-479.93q0-78.84 29.92-148.21t81.21-120.68q51.29-51.31 120.63-81.25Q401.1-860 479.93-860q78.84 0 148.21 29.92t120.68 81.21q51.31 51.29 81.25 120.63Q860-558.9 860-480.07q0 78.84-29.92 148.21t-81.21 120.68q-51.29 51.31-120.63 81.25Q558.9-100 480.07-100ZM480-480Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z" />
          </svg>

        </div>

        <!-- Carte 4: Puzzle le plus long -->
        <div class="relative rounded-2xl p-8 h-50 shadow-lg overflow-hidden"
          style="box-shadow: 0 0 20px 2px rgba(0,0,0,0.08);">
          <div class="z-10 relative">
            <h3 class="text-sm">Puzzle le plus long</h3>
            <p class="text-6xl text-orange-600 font-bold">6h 12m</p>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg"
            class="absolute -bottom-16 -right-14 w-50 h-50 text-orange-600 opacity-50 z-0 rotate-45" height="24px"
            viewBox="0 -960 960 960" width="24px" fill="currentColor">
            <path
              d="M316.15-160h327.7v-120q0-68.31-47.77-116.85-47.77-48.54-116.08-48.54T363.92-396.8q-47.77 48.58-47.77 116.8v120ZM480-514.61q68.31 0 116.08-48.59 47.77-48.58 47.77-116.8v-120h-327.7v120q0 68.31 47.77 116.85 47.77 48.54 116.08 48.54ZM210-100q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q197.25-160 210-160h46.16v-120q0-67.54 36.96-122.96 36.96-55.43 97.96-77.04-61-22-97.96-77.23-36.96-55.23-36.96-122.77v-120H210q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q197.25-860 210-860h540q12.75 0 21.37 8.63 8.63 8.63 8.63 21.38 0 12.76-8.63 21.37Q762.75-800 750-800h-46.16v120q0 67.54-36.96 122.77Q629.92-502 568.92-480q61 21.61 97.96 77.04 36.96 55.42 36.96 122.96v120H750q12.75 0 21.37 8.63 8.63 8.63 8.63 21.38 0 12.76-8.63 21.37Q762.75-100 750-100H210Z" />
          </svg>
        </div>

      </div>
    </div>
  </section>
  <section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center gap-4 mb-4">
        <h2 class="text-3xl font-bold text-gray-800 animate-etc">Puzzle en cours</h2>

        <div class="inline-flex rounded-lg border border-gray-300 overflow-hidden">
          <!-- Bouton Grille -->
          <button
            class="flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 transition-colors {{ viewType() === 'grid' ? 'bg-gray-200 hover:bg-gray-300' : 'bg-white hover:bg-gray-100' }}"
            data-view="grid" (click)="setViewType('grid')">
            <!-- Icône grille -->
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
              <!-- Carré 1 (haut gauche) -->
              <rect x="3" y="3" width="8" height="8" rx="2" />
              <!-- Carré 2 (haut droit) -->
              <rect x="13" y="3" width="8" height="8" rx="2" />
              <!-- Carré 3 (bas gauche) -->
              <rect x="3" y="13" width="8" height="8" rx="2" />
              <!-- Carré 4 (bas droit) -->
              <rect x="13" y="13" width="8" height="8" rx="2" />
            </svg>

            Grille
          </button>

          <!-- Bouton Liste -->
          <button
            class="flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 transition-colors {{ viewType() === 'list' ? 'bg-gray-200 hover:bg-gray-300' : 'bg-white hover:bg-gray-100' }}"
            data-view="list" (click)="setViewType('list')">
            <!-- Icône liste -->
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            Liste
          </button>
        </div>
      </div>


      @if(viewType() === 'grid') {
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Exemple de carte puzzle mise à jour -->
        @for(puzzle of filteredPuzzles(); track puzzle.titre) {
        <div class="bg-gray-50 rounded-xl shadow hover:shadow-lg transition">
          <!-- Image plus grande -->
          <img [src]="puzzle.image" alt="Image" class="rounded-t-xl w-full h-52 object-cover">

          <div class="p-4 lg:p-6">
            <!-- Titre + Description -->
            <div class="mb-2">
              <h3 class="text-xl font-bold text-gray-800 mb-1">{{ puzzle.titre }}</h3>
              <p class="text-sm text-gray-500 mb-1">⏱️ Durée estimée : {{ puzzle.tempsEstime }}</p>
              <p class="text-sm text-gray-500">{{ puzzle.description }}</p>
            </div>

            <!-- Infos textuelles -->
            <div class="text-sm text-gray-700 space-y-1">
              <div class="flex justify-between gap-4 mb-2">
                <span class="text-yellow-400">{{ puzzle.etoiles }}</span>
                <span class="font-medium">{{ puzzle.progression }}%</span>
              </div>

            </div>

            <!-- Barre de progression -->
            <div class="w-full bg-gray-200 rounded-full h-1.5">
              <div class="bg-amber-500 h-1.5 rounded-full" [style.width.%]="puzzle.progression"></div>
            </div>
          </div>
        </div>
        }
      </div>
      }

      @if(viewType() === 'list') {
      <div class="divide-y divide-gray-200">
        @for(puzzle of puzzles; track $index) {
        <div class="flex items-center gap-6 p-4">
          <img [src]="puzzle.image" alt="Image puzzle" class="w-24 h-24 object-cover rounded-xl" />
          <div class="flex-1/2">
            <h3 class="text-lg font-semibold text-gray-800">{{ puzzle.titre }}</h3>
            <div class="flex gap-2 items-center">
              <span class="text-yellow-400">{{ puzzle.etoiles }}</span>
              <p class="text-sm text-gray-500">⏱️ {{ puzzle.tempsEstime }}</p>
            </div>
            <p class="text-gray-600 text-sm">{{ puzzle.description }}</p>
          </div>
          <div>
            <div class="flex justify-end gap-4 mb-1">
              <span class="font-medium">{{ puzzle.progression }}%</span>
            </div>
            <div class="w-100 bg-gray-200 rounded-full h-1.5">
              <div class="bg-amber-500 h-1.5 rounded-full" [style.width.%]="puzzle.progression"></div>
            </div>
          </div>
        </div>
        }
      </div>
      }
    </div>
  </section>

  <section class="py-12 bg-gray-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ">
      <h2 class="text-3xl font-bold text-gray-800 mb-8">Tout les puzzles</h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-6">
        <!-- Carte 1 -->
        <div class="bg-white rounded-2xl shadow p-5 animate-fade-up">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">Puzzle de la Tour</h2>
          <p class="text-sm text-gray-500 mb-1">⏱️ Durée estimée : 30-45 min</p>
          <div class="flex items-center text-yellow-400 mb-2">
            ★★★★☆
          </div>
          <p class="text-gray-600 text-sm">
            Assemblez les pièces de cette tour médiévale complexe. Un vrai défi pour les amateurs de puzzles en bois.
          </p>
        </div>

        <!-- Carte 2 -->
        <div class="bg-white rounded-2xl shadow p-5 animate-fade-up">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">Mystère du Temple</h2>
          <p class="text-sm text-gray-500 mb-1">⏱️ Durée estimée : 1h - 1h30</p>
          <div class="flex items-center text-yellow-400 mb-2">
            ★★★★★
          </div>
          <p class="text-gray-600 text-sm">
            Résolvez les énigmes d’un ancien temple maya à travers un puzzle riche en détails et en mystère.
          </p>
        </div>

        <!-- Carte 3 -->
        <div class="bg-white rounded-2xl shadow p-5 animate-fade-up">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">Enigme de la Forêt</h2>
          <p class="text-sm text-gray-500 mb-1">⏱️ Durée estimée : 20-30 min</p>
          <div class="flex items-center text-yellow-400 mb-2">
            ★★★☆☆
          </div>
          <p class="text-gray-600 text-sm">
            Plongez dans une ambiance forestière magique avec ce puzzle relaxant idéal pour les débutants.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-12 bg-white">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-8">Créer un nouveau puzzle</h2>

      <form [formGroup]="puzzleForm" (ngSubmit)="onSubmit()" class="space-y-6 bg-gray-50 p-6 rounded-2xl shadow">

        <!-- Titre -->
        <div>
          <label class="block text-sm font-medium text-gray-700">Titre</label>
          <input type="text" formControlName="titre"
            class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm" />
        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm font-medium text-gray-700">Description</label>
          <textarea formControlName="description" rows="3"
            class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm"></textarea>
        </div>

        <!-- Temps estimé -->
        <div>
          <label class="block text-sm font-medium text-gray-700">Durée estimée</label>
          <input type="text" formControlName="tempsEstime" placeholder="Ex: 30-45 min"
            class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm" />
        </div>

        <!-- Difficulté (étoiles) -->
        <div>
          <label class="block text-sm font-medium text-gray-700">Difficulté (1-5)</label>
          <input type="number" formControlName="etoiles" min="1" max="5"
            class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm" />
        </div>

        <!-- Image -->
        <div>
          <label class="block text-sm font-medium text-gray-700">Image (URL)</label>
          <input type="url" formControlName="image"
            class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm" />
        </div>

        <!-- Progression -->
        <div>
          <label class="block text-sm font-medium text-gray-700">Progression (%)</label>
          <input type="number" formControlName="progression" min="0" max="100"
            class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm" />
        </div>

        <!-- Bouton -->
        <div class="flex justify-end">
          <button type="submit"
            class="px-6 py-2 bg-amber-500 text-white font-medium rounded-lg shadow hover:bg-amber-600 transition">
            ➕ Créer le puzzle
          </button>
        </div>
      </form>
    </div>
  </section>



  <router-outlet></router-outlet>
</main>

<footer class="bg-gray-800 text-gray-200 py-10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

      <!-- Logo / Description -->
      <div>
        <h3 class="text-2xl font-bold text-white mb-2">Puzzle</h3>
        <p class="text-sm text-gray-400">
          Le meilleur endroit pour les amateurs de puzzles. Explorez, défiez, amusez-vous.
        </p>
      </div>

      <!-- Liens utiles -->
      <div>
        <h4 class="text-lg font-semibold text-white mb-3">Liens utiles</h4>
        <ul class="space-y-2 text-sm">
          <li><a href="#" class="hover:text-white">Accueil</a></li>
          <li><a href="#" class="hover:text-white">Catalogue</a></li>
          <li><a href="#" class="hover:text-white">Contact</a></li>
          <li><a href="#" class="hover:text-white">Conditions générales</a></li>
        </ul>
      </div>

      <!-- Newsletter / Réseaux -->
      <div>
        <h4 class="text-lg font-semibold text-white mb-3">Restez connectés</h4>
        <p class="text-sm text-gray-400 mb-2">Recevez nos nouveautés et offres spéciales :</p>
        <form class="flex space-x-2">
          <input type="email" placeholder="Votre email"
            class="w-full px-3 py-2 rounded-lg text-sm text-gray-800 focus:outline-none" />
          <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500 text-sm">
            OK
          </button>
        </form>
        <div class="flex space-x-4 mt-4">
          <a href="#" class="hover:text-white">🌐</a>
          <a href="#" class="hover:text-white">📘</a>
          <a href="#" class="hover:text-white">📸</a>
        </div>
      </div>
    </div>

    <div class="mt-10 border-t border-gray-700 pt-6 text-center text-sm text-gray-500">
      © 2025 PuzzleLand. Tous droits réservés.
    </div>
  </div>
</footer>